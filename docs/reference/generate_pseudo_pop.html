<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generates pseudo population data set based on user-defined causal inference
approach. The function uses an adaptive approach to satisfies covariate
balance requirements. The function terminates either by satisfying covariate
balance or completing the requested number of iteration, whichever comes
first."><title>Generate pseudo population — generate_pseudo_pop • CausalGPS</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate pseudo population — generate_pseudo_pop"><meta property="og:description" content="Generates pseudo population data set based on user-defined causal inference
approach. The function uses an adaptive approach to satisfies covariate
balance requirements. The function terminates either by satisfying covariate
balance or completing the requested number of iteration, whichever comes
first."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">CausalGPS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/CausalGPS.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Introduction</h6>
    <a class="dropdown-item" href="../articles/Estimating-GPS.html">Estimating GPS</a>
    <a class="dropdown-item" href="../articles/Generating-Pseudo-Population.html">Generating Pseudo Population</a>
    <a class="dropdown-item" href="../articles/Outcome-Models.html">Outcome Models</a>
    <a class="dropdown-item" href="../articles/Generating-Synthetic-Data.html">Generate Synthetic Data</a>
    <a class="dropdown-item" href="../articles/Synthetic-Medicare.html">Synthetic Medicare Data</a>
    <a class="dropdown-item" href="../articles/Frequently-Asked-Questions.html">Frequently Asked Questions</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Collabration</h6>
    <a class="dropdown-item" href="../articles/Developers-Guide.html">Developers Guide</a>
    <a class="dropdown-item" href="../articles/Testing-the-Package.html">Testing the Package</a>
    <a class="dropdown-item" href="../articles/Notes-on-SL-Wrapper.html">Notes on SL Wrappers</a>
    <a class="dropdown-item" href="../articles/Singularity-Image.html">Singularity</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/NSAPH-Software/CausalGPS/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate pseudo population</h1>
      <small class="dont-index">Source: <a href="https://github.com/NSAPH-Software/CausalGPS/blob/HEAD/R/generate_pseudo_pop.R" class="external-link"><code>R/generate_pseudo_pop.R</code></a></small>
      <div class="d-none name"><code>generate_pseudo_pop.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates pseudo population data set based on user-defined causal inference
approach. The function uses an adaptive approach to satisfies covariate
balance requirements. The function terminates either by satisfying covariate
balance or completing the requested number of iteration, whichever comes
first.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">generate_pseudo_pop</span><span class="op">(</span></span>
<span>  <span class="va">Y</span>,</span>
<span>  <span class="va">w</span>,</span>
<span>  <span class="va">c</span>,</span>
<span>  <span class="va">ci_appr</span>,</span>
<span>  gps_density <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>  use_cov_transform <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  transformers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"pow2"</span>, <span class="st">"pow3"</span><span class="op">)</span>,</span>
<span>  bin_seq <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exposure_trim_qtls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>, <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>  gps_trim_qtls <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  sl_lib <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m_xgboost"</span><span class="op">)</span>,</span>
<span>  nthread <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  include_original_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  gps_obj <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>Y</dt>
<dd><p>A data.frame comprised of two columns: one contains the observed
outcome variable, and the other is labeled as 'id'. The column for the
outcome variable can be assigned any name as per your requirements.</p></dd>


<dt>w</dt>
<dd><p>A data.frame comprised of two columns: one contains the observed
exposure variable, and the other is labeled as 'id'. The column for the
outcome variable can be assigned any name as per your requirements.</p></dd>


<dt>c</dt>
<dd><p>A data.frame of includes observed covariate variables. It should
also consist of a column named 'id'.</p></dd>


<dt>ci_appr</dt>
<dd><p>The causal inference approach. Possible values are:</p><ul><li><p>"matching": Matching by GPS</p></li>
<li><p>"weighting": Weighting by GPS</p></li>
</ul></dd>


<dt>gps_density</dt>
<dd><p>Model type which is used for estimating GPS value,
including <code>normal</code> (default) and <code>kernel</code>.</p></dd>


<dt>use_cov_transform</dt>
<dd><p>If TRUE, the function uses transformer to meet the
covariate balance.</p></dd>


<dt>transformers</dt>
<dd><p>A list of transformers. Each transformer should be a
unary function. You can pass name of customized function in the quotes.
Available transformers:</p><ul><li><p>pow2: to the power of 2</p></li>
<li><p>pow3: to the power of 3</p></li>
</ul></dd>


<dt>bin_seq</dt>
<dd><p>Sequence of w (treatment) to generate pseudo population. If
NULL is passed the default value will be used, which is
<code>seq(min(w)+delta_n/2,max(w), by=delta_n)</code>.</p></dd>


<dt>exposure_trim_qtls</dt>
<dd><p>A numerical vector of two. Represents the trim quantile
level for exposure values. Both numbers should be in the range of [0,1] and
in increasing order (default: c(0.01, 0.99)).</p></dd>


<dt>gps_trim_qtls</dt>
<dd><p>A numerical vector of two. Represents the trim quantile
level for the gps values. Both numbers should be in the range of [0,1] and
in increasing order (default: c(0.0, 1.0)).</p></dd>


<dt>params</dt>
<dd><p>Includes list of params that is used internally. Unrelated
parameters will be ignored.</p></dd>


<dt>sl_lib</dt>
<dd><p>A vector of prediction algorithms.</p></dd>


<dt>nthread</dt>
<dd><p>An integer value that represents the number of threads to be
used by internal packages.</p></dd>


<dt>include_original_data</dt>
<dd><p>If TRUE, includes the original data in the
outcome.</p></dd>


<dt>gps_obj</dt>
<dd><p>A gps object that is generated with <code>estimate_gps</code> function.
If it is provided, the number of iteration will forced to 1 (Default: NULL).</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to different models.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns a pseudo population (gpsm_pspop) object that is generated
or augmented based on the selected causal inference approach (ci_appr). The
object includes the following objects:</p><ul><li><p>params</p><ul><li><p>ci_appr</p></li>
<li><p>params</p></li>
</ul></li>
<li><p>pseudo_pop</p></li>
<li><p>adjusted_corr_results</p></li>
<li><p>original_corr_results</p></li>
<li><p>best_gps_used_params</p></li>
<li><p>effect size of generated pseudo population</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<div class="section">
<h3 id="additional-parameters">Additional parameters<a class="anchor" aria-label="anchor" href="#additional-parameters"></a></h3>

<div class="section">
<h4 id="causal-inference-approach-ci-appr-">Causal Inference Approach (ci.appr)<a class="anchor" aria-label="anchor" href="#causal-inference-approach-ci-appr-"></a></h4>

<ul><li><p>if ci.appr = 'matching':</p><ul><li><p><em>dist_measure</em>: Matching function. Available options:</p><ul><li><p>l1: Manhattan distance matching</p></li>
</ul></li>
<li><p><em>delta_n</em>: caliper parameter.</p></li>
<li><p><em>scale</em>: a specified scale parameter to control the relative weight that
is attributed to the distance measures of the exposure versus the GPS.</p></li>
<li><p><em>covar_bl_method</em>: covariate balance method. Available options:</p><ul><li><p>'absolute'</p></li>
</ul></li>
<li><p><em>covar_bl_trs</em>: covariate balance threshold</p></li>
<li><p><em>covar_bl_trs_type</em>: covariate balance type (mean, median, maximal)</p></li>
<li><p><em>max_attempt</em>: maximum number of attempt to satisfy covariate balance.</p></li>
<li><p>See <code><a href="create_matching.html">create_matching()</a></code> for more details about the parameters and default
values.</p></li>
</ul></li>
<li><p>if ci.appr = 'weighting':</p><ul><li><p><em>covar_bl_method</em>: Covariate balance method.</p></li>
<li><p><em>covar_bl_trs</em>: Covariate balance threshold</p></li>
<li><p><em>max_attempt</em>: Maximum number of attempt to satisfy covariate balance.</p></li>
</ul></li>
</ul></div>


</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">m_d</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_syn_data.html">generate_syn_data</a></span><span class="op">(</span>sample_size <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pseuoo_pop</span> <span class="op">&lt;-</span> <span class="fu">generate_pseudo_pop</span><span class="op">(</span><span class="va">m_d</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"Y"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                                  <span class="va">m_d</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"w"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                                  <span class="va">m_d</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"cf1"</span>,<span class="st">"cf2"</span>,<span class="st">"cf3"</span>,<span class="st">"cf4"</span>,<span class="st">"cf5"</span>,<span class="st">"cf6"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                                  ci_appr <span class="op">=</span> <span class="st">"matching"</span>,</span></span>
<span class="r-in"><span>                                  gps_density <span class="op">=</span> <span class="st">"normal"</span>,</span></span>
<span class="r-in"><span>                                  bin_seq <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>                                  expos_trim_qlts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,<span class="fl">0.99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  gps_trim_qlts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,<span class="fl">0.99</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  use_cov_transform <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>                                  transformers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>xgb_nrounds<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">30</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                                xgb_eta<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>,<span class="fl">0.2</span>,<span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  sl_lib <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"m_xgboost"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                  nthread <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  covar_bl_method <span class="op">=</span> <span class="st">"absolute"</span>,</span></span>
<span class="r-in"><span>                                  covar_bl_trs <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>                                  covar_bl_trs_type<span class="op">=</span> <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>                                  max_attempt <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  dist_measure <span class="op">=</span> <span class="st">"l1"</span>,</span></span>
<span class="r-in"><span>                                  delta_n <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                                  scale <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> mean absolute correlation: 0.187874919634512| Covariate balance threshold: 0.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> mean absolute correlation: 0.259346434375271| Covariate balance threshold: 0.1</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Covariate balance condition has not been met.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Best mean absolute correlation: 0.259346434375271| Covariate balance threshold: 0.1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Naeem Khoshnevis, Xiao Wu, Danielle Braun.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

